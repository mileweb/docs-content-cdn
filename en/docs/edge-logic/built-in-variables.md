## Built-in Variables

The table below lists all the built-in variables supported by the CDN Pro servers. You can use them in Edge Logic or [Load Balancer Logic](lb7-es-structure). All variables are supported in Edge Logic, and most variables are supported in Load Balancer Logic. The [real-time log](/docs/portal/edge-configurations/creating-property#real-time-log) supports the same set of variables as the Edge Logic. Most variables here are read-only. The writable ones are indicated by <span class="badge cyan">R/W</span>. The variables with numerical values are tagged with <span class="badge small" title="numerical value">#</span>.
If you use the CDN Pro portal to edit the property, typing `$` at a position where a variable is allowed will list all the supported variables.

To use the variables properly, it is important to understand the request processing lifecycle. When Nginx processes a request, it goes through [several stages](</docs/edge-logic/declarative-imperative#timing-of-the-declarative-directives>). As the stages progress, Nginx variables are populated or updated dynamically. Accessing variables prematurely can lead to unexpected outcomes. For instance, upstream-related variables $upstream_* should not be accessed before a request is even passed to the upstream. Similarly, variables like $bytes_sent, $body_bytes_sent and $sc_completed, which are available only after the response is fully completed, should not be accessed before completion of the response (not even by add_header which is executed when response header is being constructed). These variables should only be accessed at log phase by custom_log_field or in realtime logs. In addition, variables like $request_time are updated continuously throughout the request lifecycle. If the variables are accessed before they are finalized, the values obtained early will differ from the ones at the request's completion.

**Note:** Due to upgrade of the edge node structure, the Load Balancer Logic will be deprecated soon. Please avoid using this field. All supported directives and variables should be configured in Edge Logic only. Refer to [this article](</docs/edge-logic/edge-node-structure-upgrade.md>) for more details.

| **Variable Name** | **Description** | **Edge Logic** | **LB Logic** |
| ---- | ---- | ---- | ---- |
| <span id="arg_"></span><span class="var">$arg_<em>name</em></span> | query parameter with the specified name | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="args"></span><span class="var">$args</span> | the full query string from client | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="body_bytes_sent"></span><span class="var">$body_bytes_sent</span> |<span class="badge small" title="numerical value">#</span> body bytes sent to client | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="bytes_sent"></span><span class="var">$bytes_sent</span> |<span class="badge small" title="numerical value">#</span> total response bytes to client | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="cache_misc"></span><span class="var">$cache_misc</span> | a writable variable to add parameters to the cache key | <span class="badge cyan">R/W</span> | <span class="badge yellow">No</span> |
| <span id="cdn_cache_status"></span><span class="var">$cdn_cache_status</span> | [cache status](https://www.nginx.com/blog/nginx-caching-guide/#Frequently-Asked-Questions-(FAQ)): HIT, MISS, BYPASS, EXPIRED, STALE, UPDATING, REVALIDATED. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="client_country_code"></span><span class="var">$client_country_code</span> | client’s ISO 3166 country code | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="client_http_version"></span><span class="var">$client_http_version</span> | client's HTTP version, like "HTTP/1.1" | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="client_ip_version"></span><span class="var">$client_ip_version</span> | <span class="badge small" title="numerical value">#</span> client's IP version: 4 for IPv4; 6 for IPv6 | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="client_isp"></span><span class="var">$client_isp</span> | client's ISP information | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="client_province_code"></span><span class="var">$client_province_code</span> | client's China province code | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="client_real_ip"></span><span class="var">$client_real_ip</span> | client's IP address | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="connection_requests"></span><span class="var">$connection_requests</span> |<span class="badge small" title="numerical value">#</span> current number of requests in the connection | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="content_code"></span><span class="var">$content_code</span> | a writable variable to [assign a code to content for reporting and billing purposes](/docs/edge-logic/faq#how-to-classify-traffic-in-reports-based-on-custom-rules) | <span class="badge cyan">R/W</span> | <span class="badge cyan">R/W</span> |
| <span id="content_length"></span><span class="var">$content_length</span> |<span class="badge small" title="numerical value">#</span> request's Content-Length header | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="content_type"></span><span class="var">$content_type</span> | request's Content-Type header | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="cookie_"></span><span class="var">$cookie_<em>name</em></span> | cookie with the specified name received from the client. The dot character (.) is allowed in this variable name to support cookie names that contain dots. You may need to use curly braces to separate this variable from a trailing literal dot. For example: $cookie_abc.test or ${cookie_abc.test} both refer to the value of the cookie "abc.test", but ${cookie_abc}.test gives you the value of the cookie "abc" followed by the literal ".test". | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="cpu_time_ns"></span><span class="var">$cpu_time_ns</span> |<span class="badge small" title="numerical value">#</span> CPU time in nanoseconds（1e-9s) spent on processing the request, before transferring the response body.| <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="dollar_sign"></span><span class="var">$dollar_sign</span> | a literal dollar sign | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="download_time"></span><span class="var">$download_time</span> |<span class="badge small" title="numerical value">#</span> the time in seconds from when CDN Pro receives the client request until CDN Pro sends the response body to the system buffer. The value should be equal to the sum of $request_end_time/$turn_around_time/$transfer_time. Another variable, $download_time_ms, shares the same meaning but is measured in milliseconds. The meaning of $download_time is the same as another variable, $request_time. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span>
| <span id="error_code"></span><span class="var">$error_code</span> | error about client and origin | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="extra_deliver_time_ms"></span><span class="var">$extra_deliver_time_ms</span> |<span class="badge small" title="numerical value">#</span> the estimated time in milliseconds needed to flush the TCP send buffer. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="host"></span><span class="var">$host</span> | host header, same as $http_host | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="hostname"></span><span class="var">$hostname</span> | server's hostname | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="http_"></span><span class="var">$http_<em>name</em></span> | request header with the specified name | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="http_host"></span><span class="var">$http_host</span> | request's Host header | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="ignored_body_in_cache_key"></span><span class="var">$ignored_body_in_cache_key</span> | empty string when [`proxy_request_body_in_cache_key`](/docs/edge-logic/supported-directives#proxy_request_body_in_cache_key) is `off`, '0' when the request body hash is included in the cache, or '1' otherwise| <span class="badge green">Yes</span> | <span class="badge yellow">No</span> |
| <span id="invalid_referer"></span><span class="var">$invalid_referer</span> | empty string if the “Referer” request header field value is considered valid; otherwise “1” | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="is_args"></span><span class="var">$is_args</span> | empty or "?", when query string exists | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="msec"></span><span class="var">$msec</span> |<span class="badge small" title="numerical value">#</span> current Unix time in seconds with milliseconds resolution | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="sec"></span><span class="var">$sec</span> |<span class="badge small" title="numerical value">#</span> current Unix time in integer seconds | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="origin_host"></span><span class="var">$origin_host</span> | origin's hostname | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="origin_ip"></span><span class="var">$origin_ip</span> | origin's IP | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="origin_status_code"></span><span class="var">$origin_status_code</span> | origin's status code | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="pid"></span><span class="var">$pid</span> | process ID of the service | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="pipe"></span><span class="var">$pipe</span> | "p" if request is pipelined, or "." otherwise. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="property_ver"></span><span class="var">$property_ver</span> |<span class="badge small" title="numerical value">#</span> the property version number | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="qtl_cpu_cycle"></span><span class="var">$qtl_cpu_cycle</span> | Deprecated. Please use $cpu_time_ns instead.| <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="qtl_req_id"></span><span class="var">$qtl_req_id</span> | Deprecated. Please use $unique_req_id instead. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="qtl_upstream_cache_status"></span><span class="var">$qtl_upstream_cache_status</span> | Deprecated. Please use $cdn_cache_status instead. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="random_N"></span><span class="var">$random_N</span> |<span class="badge small" title="numerical value">#</span> A random integer uniformly distributed in [0, N-1]. N can be an integer in [2, 1e9]. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="realtime_log_ds_factor"></span><span class="var">$realtime_log_ds_factor</span> |<span class="badge small" title="numerical value">#</span> RT log downsample factor. A value N means one log entry for every N requests. Users can use the directive [realtime_log_downsample](/docs/edge-logic/supported-directives#realtime_log_downsample) to override the default sample rate. | <span class="badge green">Yes</span> | <span class="badge yellow">No</span> |
| <span id="realtime_log_ds_ratio"></span><span class="var">$realtime_log_ds_ratio</span> |<span class="badge small" title="numerical value">#</span> RT log downsample ratio, the reciprocal of $realtime_log_ds_factor. The value should be a decimal number between 0 and 1. | <span class="badge green">Yes</span> | <span class="badge yellow">No</span> |
| <span id="remote_user"></span><span class="var">$remote_user</span> | user name extracted from the Authorization header if [Basic authentication](https://datatracker.ietf.org/doc/html/rfc7617) is used. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="request"></span><span class="var">$request</span> | full HTTP request line | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="request_cpu_time"></span><span class="var">$request_cpu_time</span> |<span class="badge small" title="numerical value">#</span> CPU time in nanoseconds（1e-9s) spent on processing the request, before transferring the response body. Another variable $cpu_time_ns shares the same meaning. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="request_start_time"></span><span class="var">$request_start_time</span> |<span class="badge small" title="numerical value">#</span> the Unix time (in seconds with milliseconds resolution) when the first byte of the request is received from the client. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="request_end_time"></span><span class="var">$request_end_time</span> |<span class="badge small" title="numerical value">#</span> the time in seconds it takes to receive the request header from the client and be ready to process or forward it. Another variable request_end_time_ms shares the same meaning but in milliseconds.  | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="request_length"></span><span class="var">$request_length</span> |<span class="badge small" title="numerical value">#</span> length of request line, header and body | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="request_method"></span><span class="var">$request_method</span> | HTTP method: GET, POST, etc. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="request_scheme"></span><span class="var">$request_scheme</span> | "http" or "https" | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="request_time"></span><span class="var">$request_time</span> |<span class="badge small" title="numerical value">#</span> request processing time in seconds with a milliseconds resolution; time elapsed since the first bytes were read from the client. The value is equal to the sum of the values of 3 variables: $request_end_time, $turn_around_time and $transfer_time. When the request and response sizes are small, $request_end_time and $transfer_time may be 0 and $request_time may have the same value as $turn_around_time. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="request_uri"></span><span class="var">$request_uri</span> | request URI from the client, beginning with '/' and including the query string | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="sc_completed"></span><span class="var">$sc_completed</span> |<span class="badge small" title="numerical value">#</span> Value is 1 if the last byte was served to the client; 0 otherwise.  | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="sc_initial"></span><span class="var">$sc_initial</span> |<span class="badge small" title="numerical value">#</span> Value is 1 if the first byte was served to the client; 0 otherwise. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="sent_http_"></span><span class="var">$sent\_http\_<em>name</em></span> | header with the specified name sent to client | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="sent_http_content_length"></span><span class="var">$sent_http_content_length</span> |<span class="badge small" title="numerical value">#</span> Content-Length to client | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="served_from_cache"></span><span class="var">$served_from_cache</span> |<span class="badge small" title="numerical value">#</span> Value is 1 for a HIT on edge; 0 for a MISS. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="server_addr"></span><span class="var">$server_addr</span> | IP address of the edge server | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="server_level"></span><span class="var">$server_level</span> | <span class="badge small" title="numerical value">#</span> Level of the cache server. 1 means edge, and 2 means intermediate. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="server_name"></span><span class="var">$server_name</span> | The value specified in the property's hostnames that matched the incoming request. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="server_region"></span><span class="var">$server_region</span> | Country code of the edge server, e.g. CN, US | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="server_province_code"></span><span class="var">$server_province_code</span> | The edge server's China province code | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="server_protocol"></span><span class="var">$server_protocol</span> | HTTP/1.1, HTTP/2.0 or HTTP/3.0 | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="service_port"></span><span class="var">$service_port</span> |<span class="badge small" title="numerical value">#</span> port number that received the request | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="sorted_querystring_args"></span><span class="var">$sorted_querystring_args</span> | variable providing an ASCII-based sorted list of input query parameters; it can be modified by the "[sorted_querystring_filter_parameter](/docs/edge-logic/supported-directives#sorted_querystring_filter_parameter)" directive | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="ssl_cipher"></span><span class="var">$ssl_cipher</span> | TLS cipher suite used | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="request_ssl_handshake_time"></span><span class="var">$request_ssl_handshake_time</span> |<span class="badge small" title="numerical value">#</span> CPU time, in nanoseconds, spent on TLS handshake | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="ssl_protocol"></span><span class="var">$ssl_protocol</span> | returns protocol name like "TLSv1.1" | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="ssl_server_name"></span><span class="var">$ssl_server_name</span> | TLS SNI servername | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="status"></span><span class="var">$status</span> | HTTP status code to client | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="tcpinfo_delivery_rate"></span><span class="var">$tcpinfo_delivery_rate</span> |<span class="badge small" title="numerical value">#</span> the rate, in bytes/s, at which the sent data is acknowledged by the client. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="tcpinfo_min_rtt"></span><span class="var">$tcpinfo_min_rtt</span> |<span class="badge small" title="numerical value">#</span> minimum RTT, in microseconds, observed by TCP stack for the connection | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="tcpinfo_rtt"></span><span class="var">$tcpinfo_rtt</span> |<span class="badge small" title="numerical value">#</span> latest RTT, in microseconds, observed by TCP stack for the connection | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="time_http"></span><span class="var">$time_http</span> | current time in RFC 7231 format that can be used for HTTP Date header | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="transfer_time"></span><span class="var">$transfer_time</span> |<span class="badge small" title="numerical value">#</span> the time needed for CDN Pro to send the full requested object  ( up to last byte ) to system buffer, in seconds. Another variable transfer_time_ms shares the same meaning but in milliseconds. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="turn_around_time"></span><span class="var">$turn_around_time</span> |<span class="badge small" title="numerical value">#</span> the time needed for CDN Pro to receive first byte of response of origin, in seconds. Another variable turn_around_time_ms shares the same meaning but in milliseconds.   | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="unique_req_id"></span><span class="var">$unique_req_id</span> | a unique ID for the request | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="upstream_bytes_received"></span><span class="var">$upstream_bytes_received</span> |<span class="badge small" title="numerical value">#</span> number of bytes received from a parent or origin server | <span class="badge green">Yes</span> | <span class="badge yellow">No</span> |
| <span id="upstream_bytes_sent"></span><span class="var">$upstream_bytes_sent</span> |<span class="badge small" title="numerical value">#</span> number of bytes sent to a parent or origin server | <span class="badge green">Yes</span> | <span class="badge yellow">No</span> |
| <span id="upstream_connect_time"></span><span class="var">$upstream_connect_time</span> |<span class="badge small" title="numerical value">#</span> time spent in seconds with millisecond resolution establishing a connection with a parent or origin server | <span class="badge green">Yes</span> | <span class="badge yellow">No</span> |
| <span id="upstream_cookie_"></span><span class="var">$upstream\_cookie\_<em>name</em></span> | cookie with the specified name received from the upstream server in the “Set-Cookie” response header field. May be served from the cache. The dot character (.) is allowed in this variable name to support cookie names that contain dots. You may need to use curly braces to separate this variable from a trailing literal dot. For example: $upstream_cookie_abc.test or ${upstream_cookie_abc.test} both refer to the value of the cookie "abc.test", but ${upstream_cookie_abc}.test gives you the value of the cookie "abc" followed by the literal ".test".| <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="upstream_header_time"></span><span class="var">$upstream_header_time</span> |<span class="badge small" title="numerical value">#</span> time spent in seconds with millisecond resolution receiving the response header from a parent or origin server | <span class="badge green">Yes</span> | <span class="badge yellow">No</span> |
| <span id="upstream_http_"></span><span class="var">$upstream\_http\_<em>name</em></span> | header with the specified name received from the upstream server. May be served from the cache. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
| <span id="upstream_response_status"></span><span class="var">$upstream_response_status</span> | status code from a parent or origin server. Value will be 0 for a cache HIT. | <span class="badge green">Yes</span> | <span class="badge yellow">No</span> |
| <span id="upstream_response_time"></span><span class="var">$upstream_response_time</span> |<span class="badge small" title="numerical value">#</span> time spent in seconds with millisecond resolution receiving the complete response from a parent or origin server | <span class="badge green">Yes</span> | <span class="badge yellow">No</span> |
| <span id="upstream_server_type"></span><span class="var">$upstream_server_type</span> | 'O' for origin server; 'C' for parent cache server. | <span class="badge green">Yes</span> | <span class="badge yellow">No</span> |
| <span id="upstream_trailer_"></span><span class="var">$upstream\_trailer\_<em>name</em></span> | trailer with the specified name passed from the Edge Logic with the [add_trailer](/docs/edge-logic/supported-directives#add_trailer) directive. This variable is deprecated. | <span class="badge yellow">No</span> | <span class="badge green">Yes</span> |
| <span id="uri"></span><span class="var">$uri</span> | [normalized](http://nginx.org/en/docs/http/ngx_http_core_module.html#location) request URI beginning with '/' and excluding the query string. The value may be modified by the "[rewrite](/docs/edge-logic/supported-directives#rewrite)" directive in the Edge Logic. | <span class="badge green">Yes</span> | <span class="badge green">Yes</span> |
